{"filter":false,"title":"app.js","tooltip":"/order-app/src/order-api/functions/get-single-order/app.js","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":39,"column":0},"action":"insert","lines":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.","// SPDX-License-Identifier: MIT-0","","const tableName = process.env.ORDER_TABLE;","const dynamodb = require('aws-sdk/clients/dynamodb');","const docClient = new dynamodb.DocumentClient();","","exports.getOrderById = async (event) => {","    if (event.httpMethod !== 'GET') {","        throw new Error(`getAllItems only accept GET method, you tried: ${event.httpMethod}`);","    }","    const orderId = event.pathParameters.orderId;    // It gets orderId from url","","    let get_item = {","        user_id : \"static_user\",   ","        id: orderId","    }","","    let params = {","        TableName : tableName,","        Key: get_item","    };","    ","    let item = null;","    // We call the Get function to get the single Item","    try {","        const data = await docClient.get(params).promise();","        item = data.Item;","    } catch (err) {","        console.log(\"Failure\", err.message)","    }","","    const response = {","        statusCode: 200,","        body: JSON.stringify(item)","    };","","    return response;","}",""],"id":1}],[{"start":{"row":12,"column":0},"end":{"row":17,"column":0},"action":"remove","lines":["","    let get_item = {","        user_id : \"static_user\",   ","        id: orderId","    }",""],"id":2},{"start":{"row":12,"column":0},"end":{"row":18,"column":0},"action":"insert","lines":["let get_item = {","  user_id:","    event.requestContext.authorizer.claims[\"cognito:username\"] ||","    event.requestContext.authorizer.claims.username, // As we are using Lambda proxy from AWS ApiGateway, the cognito username will directly pass to here.","  id: orderId,","}",""]}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "],"id":3},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"insert","lines":["    "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":4},"action":"insert","lines":["    "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":12,"column":4},"end":{"row":13,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":76.79999999999998,"scrollleft":0,"selection":{"start":{"row":13,"column":4},"end":{"row":13,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":87,"mode":"ace/mode/javascript"}},"timestamp":1687554879672,"hash":"792d1263216bc9aa84d5b910d0e3c4364f705cba"}